(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,a,t){e.exports=t(42)},35:function(e,a,t){},40:function(e,a,t){},42:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(17),s=t.n(l),o=(t(35),t(9)),i=t(10),c=t(13),p=t(11),d=t(14),u=t(29),m=t(3),h=t(19),g=t(12),v="HANDLE_LOGIN",f="SAVE_SEARCH_PLANNET",E="SAVE_PLANNET_DETAILS",b={login_data:{username:"",isUserLoggedIn:!1},plannet_data:{loader:!1,count:0,plannet_arr:[],errorMessage:""},plannet_details:{loader:!1,detail:{},errorMessage:""}};var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;return a.type===v?Object.assign({},e,{login_data:a.payload}):a.type===f?Object.assign({},e,{plannet_data:a.payload}):a.type===E?Object.assign({},e,{plannet_details:a.payload}):e},w=t(27),y=t(8),_=(t(40),{validate:function(e){if(!e)return!0;for(var a in e)for(var t=e[a].rules,n=(e[a].value,0);n<t.length;n++){var r=this["is"+this.capitalizeFirstLetter(t[n])](e[a]);if(r)return r}},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},isEmpty:function(e){return!e.value.replace(/\s+/g,"")&&e.fieldname+" is required"},isEmail:function(e){var a=e.value.replace(/\s+/g,"");return!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())&&e.fieldname+" is not valid"},isPhone:function(e){if(!e.value.replace(/\s+/g,""))return!1;return!/^(\([0-9]{3}\) |[0-9]{3}-)[0-9]{3}-[0-9]{4}$/.test(e.value)&&e.fieldname+" is not valid"},isName:function(e){if(!e.value.replace(/\s+/g,""))return!1;return!/[^a-zA-Z0-9]/.test(e.value)&&e.fieldname+" is not valid"},isPostalcode:function(e){return!new RegExp(/^\d{6}$/).test(e.value)&&e.fieldname+" is not valid"}});function j(e){return{type:v,payload:e}}function x(e){return{type:f,payload:e}}function O(e){return{type:E,payload:e}}var L=function(e){function a(){var e;return Object(o.a)(this,a),(e=Object(c.a)(this,Object(p.a)(a).call(this))).handleLoginUser=e.handleLoginUser.bind(Object(y.a)(e)),e.updateTextFieldValue=e.updateTextFieldValue.bind(Object(y.a)(e)),e.state={loading:!1,username:"",password:"",errorMessage:"",API_URL:window.API_URL},e}return Object(d.a)(a,e),Object(i.a)(a,[{key:"updateTextFieldValue",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"handleLoginUser",value:function(e){var a=this;e.preventDefault();this.setState({errorMessage:""});var t=_.validate({username:{rules:["empty"],value:this.state.username,fieldname:"User Name"},password:{rules:["empty"],value:this.state.password,fieldname:"Password"}});if(t)this.setState({errorMessage:t});else{this.setState({errorMessage:t,loading:!0});var n=this.state.API_URL+"people/?search="+this.state.username;fetch(n,{method:"GET",headers:new Headers({"content-type":"application/json; charset=utf-8",Accept:"application/json, application/xml, text/plain, text/html, *.*"})}).then(function(e){return e.json()}).then(function(e){1==e.count&&a.state.password.toUpperCase()==e.results[0].birth_year?(localStorage.setItem("isUserLoggedIn",!0),localStorage.setItem("name",e.results[0].name),a.setState({loading:!1}),a.props.dispatch(j({isUserLoggedIn:!0,username:e.results[0].name})),a.props.history.push("/dashboard")):(a.setState({errorMessage:"Please enter correct username and password",loading:!1}),a.props.dispatch(j({isUserLoggedIn:!1,username:""})))}).catch(function(e){a.setState({errorMessage:e,loading:!1})})}}},{key:"renderSubmit",value:function(){return this.state.loading?r.a.createElement("button",{type:"button",style:{width:"100%"},className:"btn btn-lg btn-primary"},r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading, please wait"):r.a.createElement("button",{type:"submit",style:{width:"100%"},className:"btn btn-lg btn-primary"},"Login to access")}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-wrapper"},r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"left-section"},r.a.createElement("img",{src:"images/login-logo.png"})),r.a.createElement("div",{className:"right-section"},r.a.createElement("form",{onSubmit:this.handleLoginUser},r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("div",{className:"login-title"},"Login"),r.a.createElement("div",{className:"form-block"},this.state.errorMessage?r.a.createElement("div",{className:"text text-danger"},this.state.errorMessage):"",r.a.createElement("div",{className:"login-block"},r.a.createElement("label",null,"User name"),r.a.createElement("input",{type:"text",name:"username",placeholder:"Enter user name",onChange:this.updateTextFieldValue})),r.a.createElement("div",{className:"login-block"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter your password",onChange:this.updateTextFieldValue})),r.a.createElement("div",{className:"form-action"},this.renderSubmit()),r.a.createElement("div",{className:"poweredby"},"\xa0")))))))}}]),a}(n.Component),k=Object(g.b)(function(e){return{login_data:e.login_data}})(Object(m.f)(L)),S=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(p.a)(a).call(this,e))).updateTextFieldValue=t.updateTextFieldValue.bind(Object(y.a)(t)),t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"plannetDetail",value:function(e){var a=this;e&&(this.props.dispatch(O({loader:!0})),fetch(e,{method:"GET",headers:new Headers({"content-type":"application/json; charset=utf-8",Accept:"application/json, application/xml, text/plain, text/html, *.*"})}).then(function(e){return e.json()}).then(function(e){e.name?a.props.dispatch(O({loader:!1,detail:e,errorMessage:""})):a.props.dispatch(O({loader:!1,detail:e,errorMessage:"Opps plannet detail not found!"}))}).catch(function(e){a.props.dispatch(O({loader:!1,detail:{},errorMessage:e}))}))}},{key:"renderPlannet",value:function(){if(this.props.plannet_data.count>0){var e=this,a=this.props.plannet_data.plannet_arr,t=0,n=[],l=0;return a.map(function(e){isNaN(parseInt(e.population))||(t+=parseInt(e.population))}),a.map(function(a,s){l=isNaN(parseInt(a.population))?"NA":(parseInt(a.population)/t*100).toFixed(1),n.push(r.a.createElement("li",{onClick:function(){return e.plannetDetail(a.url)},key:s},r.a.createElement("a",{href:"javascript:void(0)"},a.name,r.a.createElement("span",null,l))))}),r.a.createElement("div",{className:"tagcloud03"},r.a.createElement("ul",null,n))}}},{key:"updateTextFieldValue",value:function(e){var a=this,t=e.target.value;if(""!=t){this.props.dispatch(x({loader:!0}));var n=window.API_URL+"planets/?search="+t;fetch(n,{method:"GET",headers:new Headers({"content-type":"application/json; charset=utf-8",Accept:"application/json, application/xml, text/plain, text/html, *.*"})}).then(function(e){return e.json()}).then(function(e){e.count>0?a.props.dispatch(x({loader:!1,count:e.count,plannet_arr:e.results,errorMessage:""})):a.props.dispatch(x({loader:!1,count:0,plannet_arr:[],errorMessage:"Opps no plannet found!"}))}).catch(function(e){a.props.dispatch(x({loader:!1,plannet_arr:[],errorMessage:e,count:0}))})}else this.props.dispatch(x({loader:!1,plannet_arr:[],errorMessage:"",count:0})),this.props.dispatch(O({loader:!1,detail:{},errorMessage:""}))}},{key:"renderPlannetDetail",value:function(){if(this.props.plannet_details.detail)return r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"col-lg-2"},r.a.createElement("strong",null,"Name "),this.props.plannet_details.detail.name),r.a.createElement("div",{className:"col-lg-2"},r.a.createElement("strong",null,"Rotation Period "),this.props.plannet_details.detail.rotation_period),r.a.createElement("div",{className:"col-lg-2"},r.a.createElement("strong",null,"Orbital Period "),this.props.plannet_details.detail.orbital_period),r.a.createElement("div",{className:"col-lg-2"},r.a.createElement("strong",null,"Diameter "),this.props.plannet_details.detail.diameter),r.a.createElement("div",{className:"col-lg-2"},r.a.createElement("strong",null,"Climate "),this.props.plannet_details.detail.climate),r.a.createElement("div",{className:"col-lg-2"},r.a.createElement("strong",null,"Population "),this.props.plannet_details.detail.population))}},{key:"render",value:function(){var e=this;return console.log(this.props),r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-default navbar-fixed-top"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-header page-scroll"},r.a.createElement("button",{type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#bs-example-navbar-collapse-1"},r.a.createElement("span",{className:"sr-only"},"Toggle navigation"),r.a.createElement("span",{className:"icon-bar"}),r.a.createElement("span",{className:"icon-bar"}),r.a.createElement("span",{className:"icon-bar"})),r.a.createElement("a",{className:"navbar-brand",href:"#page-top"},"Star Wars Plannets")),r.a.createElement("div",{className:"collapse navbar-collapse",id:"bs-example-navbar-collapse-1"},r.a.createElement("ul",{className:"nav navbar-nav navbar-right"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Welcome, ",localStorage.name,"\xa0",r.a.createElement("i",{className:"fa fa-caret-down","aria-hidden":"true"})),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",style:{width:"100%",fontSize:"15px",fontWeight:"bold"}},r.a.createElement("a",{className:"dropdown-item",href:"javascript:void(0)",onClick:function(){return e.handle_logout()},style:{margin:"15px"}},"Logout"))))))),r.a.createElement("div",{className:"content-wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12 text-center"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",onChange:this.updateTextFieldValue,name:"search",placeholder:"Search star wars plannet...",className:"form-control",id:"search"})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12 text-center"},this.props.plannet_data.loader&&r.a.createElement("small",null,"Loading Data..."),this.props.plannet_data.errorMessage&&r.a.createElement("small",null,this.props.plannet_data.errorMessage)),r.a.createElement("div",{className:"col-lg-12"},this.renderPlannet()),r.a.createElement("div",{className:"col-lg-12 text-center"},this.props.plannet_details.loader&&r.a.createElement("small",null,"Loading Detail Data..."),this.props.plannet_details.errorMessage&&r.a.createElement("small",null,this.props.plannet_details.errorMessage)),this.renderPlannetDetail()))))}},{key:"handle_logout",value:function(){localStorage.clear(),window.location.reload(!0)}}]),a}(n.Component),M=Object(g.b)(function(e){return{plannet_data:e.plannet_data,plannet_details:e.plannet_details}})(Object(m.f)(S)),I=Object(h.b)(N),U=function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(g.a,{store:I},r.a.createElement(u.a,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return e.isUserLoggedIn()?r.a.createElement(M,null):r.a.createElement(k,null)}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard",render:function(){return e.isUserLoggedIn()?r.a.createElement(M,null):r.a.createElement(k,null)}}))))}},{key:"isUserLoggedIn",value:function(){return!!localStorage.isUserLoggedIn}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.fef748a9.chunk.js.map